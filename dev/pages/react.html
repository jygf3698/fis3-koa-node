<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<title>react | demo页</title>
<meta name="keywords" itemprop="keywords" content="校导登录页">
<meta itemprop="name" content="校导登录页">
<meta itemprop="description" name="description" content="校导登录页">
<meta itemprop="image" content="校导登录页">
<meta name="robots" content="index,follow" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<!--[if lt IE 9]>
<script src="http://cdn.qplus.com/qqun/qun/homework/js/es5-shim.js"></script>
<![endif]-->
<link rel="dns-prefetch" href="//static.xiaodao360.cn">
<link rel="stylesheet" type="text/css" href="/pkg/pages/react/main_min.css"></head>
<body>
<script data-loader>/**
* file: mod.js
* ver: 1.0.11
* update: 2015/05/14
*
* https://github.com/fex-team/mod
*/
var require, define;
(function(global) {
if (require) return; // 避免重复加载而导致已定义模块丢失
var head = document.getElementsByTagName('head')[0],
loadingMap = {},
factoryMap = {},
modulesMap = {},
scriptsMap = {},
resMap = {},
pkgMap = {};
function createScript(url, onerror) {
if (url in scriptsMap) return;
scriptsMap[url] = true;
var script = document.createElement('script');
if (onerror) {
var tid = setTimeout(onerror, require.timeout);
script.onerror = function() {
clearTimeout(tid);
onerror();
};
function onload() {
clearTimeout(tid);
}
if ('onload' in script) {
script.onload = onload;
} else {
script.onreadystatechange = function() {
if (this.readyState == 'loaded' || this.readyState == 'complete') {
onload();
}
}
}
}
script.type = 'text/javascript';
script.src = url;
document.body.appendChild(script);
return script;
}
function loadScript(id, callback, onerror) {
var queue = loadingMap[id] || (loadingMap[id] = []);
queue.push(callback);
//
// resource map query
//
var res = resMap[id] || resMap[id + '.js'] || {};
var pkg = res.pkg;
var url;
if (pkg) {
url = pkgMap[pkg].url;
} else {
url = res.url || id;
}
// console.log(id, url);
createScript(url, onerror && function() {
onerror(id);
});
}
define = function(id, factory) {
id = id.replace(/\.js$/i, '');
factoryMap[id] = factory;
var queue = loadingMap[id];
if (queue) {
for (var i = 0, n = queue.length; i < n; i++) {
queue[i]();
}
delete loadingMap[id];
}
};
require = function(id) {
// compatible with require([dep, dep2...]) syntax.
if (id && id.splice) {
return require.async.apply(this, arguments);
}
id = require.alias(id);
var mod = modulesMap[id];
if (mod) {
return mod.exports;
}
//
// init module
//
var factory = factoryMap[id];
if (!factory) {
throw '[ModJS] Cannot find module `' + id + '`';
}
mod = modulesMap[id] = {
exports: {}
};
//
// factory: function OR value
//
var ret = (typeof factory == 'function') ? factory.apply(mod, [require, mod.exports, mod]) : factory;
if (ret) {
mod.exports = ret;
}
return mod.exports;
};
require.async = function(names, onload, onerror) {
if (typeof names == 'string') {
names = [names];
}
var needMap = {};
var needNum = 0;
function findNeed(depArr) {
for (var i = 0, n = depArr.length; i < n; i++) {
//
// skip loading or loaded
//
var dep = require.alias(depArr[i]);
if (dep in factoryMap) {
// check whether loaded resource's deps is loaded or not
var child = resMap[dep] || resMap[dep + '.js'];
if (child && 'deps' in child) {
findNeed(child.deps);
}
continue;
}
if (dep in needMap) {
continue;
}
needMap[dep] = true;
needNum++;
loadScript(dep, updateNeed, onerror);
var child = resMap[dep] || resMap[dep + '.js'];
if (child && 'deps' in child) {
findNeed(child.deps);
}
}
}
function updateNeed() {
if (0 == needNum--) {
var args = [];
for (var i = 0, n = names.length; i < n; i++) {
args[i] = require(names[i]);
}
onload && onload.apply(global, args);
}
}
findNeed(names);
updateNeed();
};
require.resourceMap = function(obj) {
var k, col;
// merge `res` & `pkg` fields
col = obj.res;
for (k in col) {
if (col.hasOwnProperty(k)) {
resMap[k] = col[k];
}
}
col = obj.pkg;
for (k in col) {
if (col.hasOwnProperty(k)) {
pkgMap[k] = col[k];
}
}
};
require.loadJs = function(url) {
createScript(url);
};
require.loadCss = function(cfg) {
if (cfg.content) {
var sty = document.createElement('style');
sty.type = 'text/css';
if (sty.styleSheet) { // IE
sty.styleSheet.cssText = cfg.content;
} else {
sty.innerHTML = cfg.content;
}
head.appendChild(sty);
} else if (cfg.url) {
var link = document.createElement('link');
link.href = cfg.url;
link.rel = 'stylesheet';
link.type = 'text/css';
head.appendChild(link);
}
};
require.alias = function(id) {
return id.replace(/\.js$/i, '');
};
require.timeout = 5000;
})(this);;require.resourceMap({"res":{"badjs":{"pkg":"p0","deps":["badjs-report"]},"badjs-report":{"pkg":"p0"},"pages/react/main.js":{"pkg":"p1","deps":["react/index.tpl","comBase","react-content","react-hello"]},"react/index.tpl":{"pkg":"p1"},"comBase":{"pkg":"p1"},"react-content":{"pkg":"p1","deps":["react","react-dom"]},"react-hello":{"pkg":"p1","deps":["react","react-dom"]},"react":{"pkg":"p1"},"react-dom":{"pkg":"p1","deps":["react"]}},"pkg":{"p0":{"url":"/pkg/badjs.min.js"},"p1":{"url":"/pkg/pages/react/main.js.min.js"}}});</script>
{{ reactComponent | safe }}
<div id="testHello"></div>
{{ reactComponent | safe }}
<div id="test"></div>
<script>
require.async(['badjs'], function(badjs) {
badjs.init({
id: 68157333,
combo: 0,       // combo 是否合并上报， 0 关闭， 1 启动（默认）
delay: 1000,    // 当 combo 为 true 可用，延迟多少毫秒，合并缓冲区中的上报（默认）
url: "http://dev.xiaodao360.cn/proton/v1/report", // 指定上报地址
ignore: [/Script error/i], // 忽略某个错误
random: 1,      // 抽样上报，1~0 之间数值，1为100%上报（默认 1）
repeat: 1,      // 重复上报次数(对于同一个错误超过多少次不上报),避免出现单个用户同一错误上报过多的情况
onReport: function(id, errObj) {}, // 当上报的时候回调。 id: 上报的 id, errObj: 错误的对象
ext: {}         // 扩展属性，后端做扩展处理属性。例如：存在 msid 就会分发到 monitor
});
});
require.async(['pages/react/main'], function(main) {
main.init();
});
</script>
</body>
</html>
